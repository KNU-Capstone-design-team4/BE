import os
import asyncio
from openai import AsyncOpenAI
import numpy as np
from dotenv import load_dotenv

# .env íŒŒì¼ì—ì„œ í™˜ê²½ ë³€ìˆ˜ ë¡œë“œ
load_dotenv()

client = AsyncOpenAI(api_key=os.environ.get("OPENAI_API_KEY"))

# 1ë‹¨ê³„ì—ì„œ ë§Œë“  'íŒ ëª©ë¡'ì„ ì—¬ê¸°ì— ë¶™ì—¬ë„£ìŠµë‹ˆë‹¤.
# ì—¬ëŸ¬ ì¤„ ë¬¸ìì—´ë¡œ ë§Œë“œëŠ” ê²ƒì´ í¸ë¦¬í•©ë‹ˆë‹¤.
TIP_LIST = [
    "1.**(ì´ˆê³¼ê·¼ë¬´ í•©ì˜)** ë²•ì •ê·¼ë¡œì‹œê°„(ì£¼ 40ì‹œê°„)ì„ ì´ˆê³¼í•˜ì—¬ ê·¼ë¬´í•˜ë ¤ë©´, ë°˜ë“œì‹œ ê·¼ë¡œìì™€ì˜ ì„œë©´ í•©ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤. êµ¬ë‘ í•©ì˜ëŠ” ì¶”í›„ ë¶„ìŸì˜ ì†Œì§€ê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
    "2.** (ì²­ì†Œë…„ ê·¼ë¡œ)** ë§Œ 18ì„¸ ë¯¸ë§Œ ì²­ì†Œë…„ì˜ ë²•ì •ê·¼ë¡œì‹œê°„ì€ í•˜ë£¨ 7ì‹œê°„, ì£¼ 35ì‹œê°„ì„ ì´ˆê³¼í•  ìˆ˜ ì—†ìœ¼ë©°, ë³¸ì¸ì´ ë™ì˜í•´ë„ ì—°ì¥ê·¼ë¡œëŠ” ì£¼ 5ì‹œê°„ê¹Œì§€ë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.",
    "3.** (íœ´ì¼ê·¼ë¡œìˆ˜ë‹¹)** íœ´ì¼ì— ê·¼ë¬´í–ˆë‹¤ë©´ ë°˜ë“œì‹œ ê°€ì‚°ìˆ˜ë‹¹ì„ ë°›ì•„ì•¼ í•©ë‹ˆë‹¤. 8ì‹œê°„ ì´ë‚´ ê·¼ë¬´ëŠ” í†µìƒì„ê¸ˆì˜ 1.5ë°°, 8ì‹œê°„ì„ ì´ˆê³¼í•œ ê·¼ë¬´ëŠ” 2ë°°ë¥¼ ì§€ê¸‰ë°›ì•„ì•¼ í•©ë‹ˆë‹¤.",
    "4.** (ì•¼ê°„ê·¼ë¡œìˆ˜ë‹¹)** ì˜¤í›„ 10ì‹œë¶€í„° ë‹¤ìŒ ë‚  ì˜¤ì „ 6ì‹œ ì‚¬ì´ì— ê·¼ë¬´í–ˆë‹¤ë©´, í†µìƒì„ê¸ˆì˜ 50%ë¥¼ ì•¼ê°„ê·¼ë¡œìˆ˜ë‹¹ìœ¼ë¡œ ì¶”ê°€ ì§€ê¸‰ë°›ì•„ì•¼ í•©ë‹ˆë‹¤.",
    "5.** (ìˆ˜ë‹¹ ì¤‘ë³µì§€ê¸‰)** ë§Œì•½ íœ´ì¼ì— ì•¼ê°„ ê·¼ë¬´ë¥¼ í–ˆë‹¤ë©´, íœ´ì¼ê·¼ë¡œìˆ˜ë‹¹(1.5ë°°)ê³¼ ì•¼ê°„ê·¼ë¡œìˆ˜ë‹¹(0.5ë°°)ì´ ì¤‘ë³µìœ¼ë¡œ ì ìš©ë˜ì–´ í†µìƒì„ê¸ˆì˜ 2ë°°ë¥¼ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
    "6.** (ì£¼íœ´ìˆ˜ë‹¹ ì¡°ê±´)** ì£¼íœ´ìˆ˜ë‹¹ì€ '1ì£¼ ì†Œì •ê·¼ë¡œì‹œê°„ 15ì‹œê°„ ì´ìƒ'ê³¼ '1ì£¼ ê°œê·¼'ì´ë¼ëŠ” ë‘ ê°€ì§€ ì¡°ê±´ì„ ëª¨ë‘ ì¶©ì¡±í•´ì•¼ ë°œìƒí•©ë‹ˆë‹¤.",
    "7.** (ë‹¨ê¸° ê·¼ë¡œì ì£¼íœ´ìˆ˜ë‹¹)** ê³„ì•½ ê¸°ê°„ì´ 1ì£¼ì¼ì´ë¼ë„, ì£¼ 15ì‹œê°„ ì´ìƒ ì¼í•˜ê³  ê°œê·¼í–ˆë‹¤ë©´ ê³„ì•½ ì¢…ë£Œì™€ ë³„ê°œë¡œ ì£¼íœ´ìˆ˜ë‹¹ì„ ì§€ê¸‰ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ì£¼ ê·¼ë¬´ ì—¬ë¶€ëŠ” ìƒê´€ì—†ìŠµë‹ˆë‹¤.",
    "8.** (ê³„ì•½ì„œ ì‘ì„± ì‹œì )** ëª¨ë“  ê·¼ë¡œê³„ì•½ì„œëŠ” ë°˜ë“œì‹œ ì—…ë¬´ë¥¼ ì‹œì‘í•˜ê¸° ì „ì— ì‘ì„±í•´ì•¼ í•˜ë©°, ì‘ì„± í›„ 1ë¶€ë¥¼ ê·¼ë¡œìì—ê²Œ ì¦‰ì‹œ êµë¶€í•˜ëŠ” ê²ƒì´ ë²•ì  ì˜ë¬´ì…ë‹ˆë‹¤.",
    "9.** (ê³„ì•½ì„œ ë¯¸ì‘ì„± ë²Œê¸ˆ)** ê·¼ë¡œê³„ì•½ì„œë¥¼ ì„œë©´ìœ¼ë¡œ ì‘ì„±í•˜ê³  êµë¶€í•˜ì§€ ì•Šì€ ê²½ìš°, ì‚¬ì—…ì£¼ëŠ” 500ë§Œì› ì´í•˜ì˜ ë²Œê¸ˆì— ì²˜í•´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
    "10.** (ê·¼ë¡œì¡°ê±´ ë³€ê²½)** ì„ê¸ˆ, ê·¼ë¡œì‹œê°„ ë“± ì¤‘ìš”í•œ ê·¼ë¡œì¡°ê±´ì´ ë³€ê²½ë  ê²½ìš°, êµ¬ë‘ í•©ì˜ë§Œìœ¼ë¡œëŠ” ë¶€ì¡±í•˜ë©° ë°˜ë“œì‹œ ë³€ê²½ëœ ë‚´ìš©ì„ ì„œë©´ìœ¼ë¡œ ëª…ì‹œí•˜ì—¬ ë‹¤ì‹œ êµë¶€í•´ì•¼ í•©ë‹ˆë‹¤.",
    "11.** (ë‹¨ì‹œê°„ ê·¼ë¡œì ê³„ì•½ì„œ)** ì•„ë¥´ë°”ì´íŠ¸ì²˜ëŸ¼ ê·¼ë¬´ ìš”ì¼ì´ë‚˜ ì‹œê°„ì´ ìœ ë™ì ì¸ ê²½ìš°, \"ì›”, ìˆ˜, ê¸ˆ, 14:00~18:00\"ì™€ ê°™ì´ ê·¼ë¡œì¼ê³¼ ê·¼ë¡œì¼ë³„ ê·¼ë¡œì‹œê°„ì„ ë°˜ë“œì‹œ êµ¬ì²´ì ìœ¼ë¡œ ëª…ì‹œí•´ì•¼ í•©ë‹ˆë‹¤.",
    "12.** (íœ´ê²Œì‹œê°„ ëª…ì‹œ)** íœ´ê²Œì‹œê°„ì€ ì„ê¸ˆì— í¬í•¨ë˜ì§€ ì•ŠëŠ” ë¬´ê¸‰ ì‹œê°„ì´ ì›ì¹™ì…ë‹ˆë‹¤. ë”°ë¼ì„œ ê³„ì•½ì„œì— íœ´ê²Œì‹œê°„ì„ ëª…í™•íˆ ê¸°ì¬í•´ì•¼ ì´ ê·¼ë¡œì‹œê°„ ë° ì„ê¸ˆ ê³„ì‚°ì— ëŒ€í•œ ì˜¤í•´ë¥¼ ë§‰ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
    "13.** (íœ´ê²Œì‹œê°„ ë²•ì  ê¸°ì¤€)** ê·¼ë¡œì‹œê°„ì´ 4ì‹œê°„ì´ë©´ 30ë¶„ ì´ìƒ, 8ì‹œê°„ì´ë©´ 1ì‹œê°„ ì´ìƒì˜ íœ´ê²Œì‹œê°„ì„ 'ê·¼ë¡œì‹œê°„ ë„ì¤‘ì—' ë¶€ì—¬í•´ì•¼ í•©ë‹ˆë‹¤. ì—…ë¬´ ì‹œì‘ ì „ì´ë‚˜ ì¢…ë£Œ í›„ì— ë¶€ì—¬í•˜ëŠ” ê²ƒì€ ìœ„ë²•ì…ë‹ˆë‹¤.",
    "14.** (í‡´ì§ê¸ˆ ì—°ë´‰ í¬í•¨ ê¸ˆì§€)** ì›”ê¸‰ì´ë‚˜ ì—°ë´‰ì— í‡´ì§ê¸ˆì„ í¬í•¨í•˜ì—¬ ì§€ê¸‰í•˜ëŠ” ê³„ì•½ì€ ê·¼ë¡œê¸°ì¤€ë²•ìƒ ë¶ˆë²•ì´ë©° ë¬´íš¨ì…ë‹ˆë‹¤. í‡´ì§ê¸ˆì€ ë°˜ë“œì‹œ í‡´ì§ ì‹œì ì— ë³„ë„ë¡œ ì •ì‚°ë°›ì•„ì•¼ í•©ë‹ˆë‹¤.",
    "15.** (í¬ê´„ì„ê¸ˆì œ ìœ ì˜ì‚¬í•­)** ì—°ì¥Â·ì•¼ê°„ìˆ˜ë‹¹ ë“±ì„ ë¯¸ë¦¬ ì›”ê¸‰ì— í¬í•¨í•˜ëŠ” í¬ê´„ì„ê¸ˆì œ ê³„ì•½ì€ ê°€ëŠ¥í•˜ì§€ë§Œ, ì‹¤ì œ ë°œìƒí•œ ìˆ˜ë‹¹ì´ ì•½ì •ëœ ìˆ˜ë‹¹ë³´ë‹¤ ë§ì„ ê²½ìš° ì°¨ì•¡ì„ ì¶”ê°€ë¡œ ì§€ê¸‰í•´ì•¼ í•©ë‹ˆë‹¤.",
    "16.** (ê³µíœ´ì¼ ìœ ê¸‰íœ´ì¼)** 2022ë…„ë¶€í„° ì‚¬ì—…ì¥ ê·œëª¨ì™€ ìƒê´€ì—†ì´ ëª¨ë“  ê·¼ë¡œìëŠ” 'ë¹¨ê°„ ë‚ '(ê´€ê³µì„œ ê³µíœ´ì¼)ì„ ìœ ê¸‰íœ´ì¼ë¡œ ë³´ì¥ë°›ì•„ì•¼ í•©ë‹ˆë‹¤.",
    "17.** (ëŒ€ì²´íœ´ì¼ ì ìš©)** ê³µíœ´ì¼ì´ ì£¼ë§ê³¼ ê²¹ì¹˜ëŠ” ê²½ìš° ë°œìƒí•˜ëŠ” ëŒ€ì²´ê³µíœ´ì¼ ì—­ì‹œ ëª¨ë“  ì‚¬ì—…ì¥ì—ì„œ ìœ ê¸‰íœ´ì¼ë¡œ ë³´ì¥í•´ì•¼ í•©ë‹ˆë‹¤.",
    "18.** (íœ´ì¼ ì¡°í•­ ëª…ì‹œ)** ê·¼ë¡œê³„ì•½ì„œì—ëŠ” 'ì£¼íœ´ì¼'ì´ ë¬´ìŠ¨ ìš”ì¼ì¸ì§€, 'ê³µíœ´ì¼'ì„ ìœ ê¸‰ìœ¼ë¡œ ë³´ì¥í•˜ëŠ”ì§€ ë“± íœ´ì¼ì— ê´€í•œ ì‚¬í•­ì„ ë°˜ë“œì‹œ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.",
    "19.** (5ì¸ ë¯¸ë§Œ ì‚¬ì—…ì¥ ì˜ˆì™¸)** ì—°ì¥Â·ì•¼ê°„Â·íœ´ì¼ê·¼ë¡œ ê°€ì‚°ìˆ˜ë‹¹, ì—°ì°¨ìœ ê¸‰íœ´ê°€ ë“±ì˜ ì¼ë¶€ ê·œì •ì€ ìƒì‹œ ê·¼ë¡œì 5ì¸ ë¯¸ë§Œ ì‚¬ì—…ì¥ì—ëŠ” ì ìš©ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìœ¼ë‹ˆ í™•ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.",
    "20.** (ë²Œê¸ˆê³¼ ë³„ê°œë¡œ ì„ê¸ˆ ì§€ê¸‰ ì˜ë¬´)** ì‚¬ì—…ì£¼ê°€ ê·¼ë¡œê¸°ì¤€ë²• ìœ„ë°˜ìœ¼ë¡œ ë²Œê¸ˆì„ ë‚´ë”ë¼ë„, ê·¼ë¡œìì—ê²Œ ì§€ê¸‰í•´ì•¼ í•  ì£¼íœ´ìˆ˜ë‹¹, ê°€ì‚°ìˆ˜ë‹¹ ë“±ì˜ ì„ê¸ˆ ì§€ê¸‰ ì˜ë¬´ëŠ” ì‚¬ë¼ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤."
    "21.**(ìµœì €ì‹œê¸‰)2025ë…„ì„ ê¸°ì¤€ìœ¼ë¡œ ìµœì €ì‹œê¸‰ì€ 10030ì›ì…ë‹ˆë‹¤. ì´ë¥¼ ì§€í‚¤ì§€ ì•Šì„ ê²½ìš°, 5ë…„ ì´í•˜ì˜ ì§•ì—­ì— ì²˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
]
# 1ë‹¨ê³„ì—ì„œ ë§Œë“  'ì§ˆë¬¸ ì„¸íŠ¸'ë¥¼ ë¦¬ìŠ¤íŠ¸ë¡œ ë§Œë“­ë‹ˆë‹¤.

QUESTION_LIST = [
    # --- íŒì— ìˆëŠ” ë‚´ìš©ì„ ì§ì ‘ ë¬»ëŠ” ì§ˆë¬¸ ---
    "ë‚˜ëŠ” ìµœì €ì‹œê¸‰ì„ 5000ì›ìœ¼ë¡œ í•´ì„œ ì•„ë¥´ë°”ì´íŠ¸ë¥¼ í• ê±°ì•¼",
    "ë²•ì • ê·¼ë¡œ ì‹œê°„ì€ ë¬´ì—‡ì¸ê°€ìš”?",
    "ì£¼ ìµœëŒ€ ê·¼ë¡œì‹œê°„ì€ ëª‡ ì‹œê°„ì¸ê°€ìš”?",
    "íœ´ì¼ ê·¼ë¡œê°€ ë¬´ì—‡ì¸ê°€ìš”?",
    "ì•¼ê°„ê·¼ë¡œë€ ë¬´ì—‡ì¸ê°€ìš”?",
    "ìœ ê¸‰íœ´ì¼(ì£¼íœ´ì¼)ì€ ë¬´ì—‡ì¸ê°€ìš”?",
    "ì£¼íœ´ìˆ˜ë‹¹ì„ ë°›ê¸° ìœ„í•œ ì¡°ê±´ì€ ë¬´ì—‡ì¸ê°€ìš”?",
    "ê³„ì•½ê¸°ê°„ 1ì£¼ì¼(7ì¼ê°„)ì¸ ì•„ë¥´ë°”ì´íŠ¸ìƒì˜ ê²½ìš° 1ì£¼ê°„(7ì¼ê°„) ì¼í•˜ê³  ê³„ì•½ê¸°ê°„ì´ ì¢…ë£Œí–ˆëŠ”ë° ì£¼íœ´ìˆ˜ë‹¹ì„ ë°›ì„ ìˆ˜ ìˆë‚˜ìš”?",
    "ë§Œ 18ì„¸ ë¯¸ë§Œ ì²­ì†Œë…„ì´ ë³¸ì¸ ë™ì˜ í•˜ì— í•  ìˆ˜ ìˆëŠ” ì—°ì¥ê·¼ë¡œëŠ” ì£¼ ëª‡ ì‹œê°„ê¹Œì§€ì¸ê°€ìš”?",
    "ì–¸ì œ ê·¼ë¡œê³„ì•½ì„œë¥¼ ì‘ì„±í•´ì„œ ê·¼ë¡œìì—ê²Œ ì£¼ì–´ì•¼ í•˜ë‚˜ìš”?",
    "ê·¼ë¡œê³„ì•½ì„œ ë‚´ìš©ì´ ë°”ë€Œë©´ ìƒˆë¡œ ì¨ì•¼ í•˜ë‚˜ìš”?",
    "ì•¼ê°„ê·¼ë¡œìˆ˜ë‹¹ì€ í†µìƒì„ê¸ˆì˜ ëª‡ í¼ì„¼íŠ¸ë¥¼ ì¶”ê°€ë¡œ ì§€ê¸‰ë°›ì•„ì•¼ í•˜ë‚˜ìš”?",
    "íœ´ê²Œ ì‹œê°„ì€ ì–¼ë§ˆë‚˜ ë³´ì¥í•´ì•¼ í•˜ë‚˜ìš”?",
    "ë‹¨ì‹œê°„ ê·¼ë¡œìëŠ” ê·¼ë¬´ ìš”ì¼ì„ ëª¨ë‘ ì ì–´ì•¼ í•˜ë‚˜ìš”?",
    "ëŒ€ì²´ê³µíœ´ì¼ë„ ìœ ê¸‰íœ´ì¼ì¸ê°€ìš”?",
    "ê³µíœ´ì¼(ë¹¨ê°„ ë‚ )ì—ë„ ì‰¬ê²Œ í•´ì¤˜ì•¼ í•˜ë‚˜ìš”?",
    "íœ´ì¼ì— ê´€í•œ ì‚¬í•­ì€ ê³„ì•½ì„œì— ì ì–´ì•¼ í•˜ë‚˜ìš”?",

    # --- íŒ ë‚´ìš©ì„ ì¡°í•©/ì¶”ë¡ í•´ì•¼ í•˜ëŠ” ì§ˆë¬¸ ---
    "ì£¼íœ´ì¼ì— ë°¤ 11ì‹œë¶€í„° ìƒˆë²½ 2ì‹œê¹Œì§€ 3ì‹œê°„ ì¼í–ˆìŠµë‹ˆë‹¤. ê°€ì‚°ìˆ˜ë‹¹ì„ ì–¼ë§ˆë‚˜ ë°›ì•„ì•¼ í•˜ë‚˜ìš”?",
    "ì…ì‚¬í•  ë•Œ ì—°ë´‰ì— í‡´ì§ê¸ˆì„ í¬í•¨í•˜ê¸°ë¡œ êµ¬ë‘ë¡œ í•©ì˜í•˜ê³  ì•„ì§ ê·¼ë¡œê³„ì•½ì„œë¥¼ ì“°ì§€ ì•Šì•˜ëŠ”ë°, ë²•ì ìœ¼ë¡œ ë¬¸ì œê°€ ì—†ë‚˜ìš”?",
    "16ì„¸ ì•„ë¥´ë°”ì´íŠ¸ìƒì´ í‰ì¼ì— í•˜ë£¨ 7ì‹œê°„ì”© 5ì¼ ì¼í•˜ê³ , ì£¼ë§ì— ì¶”ê°€ë¡œ 8ì‹œê°„ ë” ì¼í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤. ì´ ê³„ì•½ì€ ë²•ì ìœ¼ë¡œ ê°€ëŠ¥í•œê°€ìš”?",
    "ì›”ìš”ì¼ì— 4ì‹œê°„, ìˆ˜ìš”ì¼ì— 4ì‹œê°„, ê¸ˆìš”ì¼ì— 4ì‹œê°„ ì¼í•˜ëŠ” ì•„ë¥´ë°”ì´íŠ¸ìƒì…ë‹ˆë‹¤. ì£¼íœ´ìˆ˜ë‹¹ì„ ë°›ì„ ìˆ˜ ìˆì„ê¹Œìš”?",
    "ê³„ì•½ì„œì— ê·¼ë¬´ì‹œê°„ì´ ì˜¤ì „ 9ì‹œë¶€í„° ì˜¤í›„ 6ì‹œê¹Œì§€ë¡œ ë˜ì–´ìˆê³ , íœ´ê²Œì‹œê°„ì´ 30ë¶„ìœ¼ë¡œ ëª…ì‹œë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ ê³„ì•½ì€ ë¬¸ì œê°€ ì—†ë‚˜ìš”?",
    "ì‚¬ì¥ë‹˜ì´ ê·¼ë¡œê³„ì•½ì„œë¥¼ ì“°ê¸´ í–ˆëŠ”ë°, í•œ ë¶€ë§Œ ë§Œë“¤ì–´ì„œ íšŒì‚¬ì—ì„œë§Œ ë³´ê´€í•˜ê³  ì €ì—ê²ŒëŠ” ì£¼ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì´ê±´ ê´œì°®ì€ ê±´ê°€ìš”?",
    "ì‘ë…„(2023ë…„) 3ì›” 1ì¼ì— 4ì‹œê°„ ì¼í–ˆìŠµë‹ˆë‹¤. ì¶”ê°€ ìˆ˜ë‹¹ì„ ë°›ì„ ìˆ˜ ìˆë‚˜ìš”? (ê³µíœ´ì¼ ìœ ê¸‰íœ´ì¼ ì˜ë¬´í™” ì‹œì  ê³ ë ¤ í•„ìš”)",
    "ì œ ì—°ë´‰ì—ëŠ” ëª¨ë“  ìˆ˜ë‹¹ì´ í¬í•¨ëœ í¬ê´„ì„ê¸ˆì œë¼ê³  í•©ë‹ˆë‹¤. ì´ ê²½ìš° ì œê°€ ì•¼ê°„ì´ë‚˜ íœ´ì¼ì— ì¼í•´ë„ ì¶”ê°€ ìˆ˜ë‹¹ì„ ëª» ë°›ëŠ” ê²Œ ë§ë‚˜ìš”?",
    "ë”± 5ì¼ë§Œ ì¼í•˜ëŠ” ë‹¨ê¸° ì•„ë¥´ë°”ì´íŠ¸ì¸ë°, í•˜ë£¨ì— 4ì‹œê°„ì”© ì¼í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤. ì£¼íœ´ìˆ˜ë‹¹ì„ ë°›ì„ ìˆ˜ ìˆë‚˜ìš”?",
    "ì¹´í˜ì—ì„œ ì•„ë¥´ë°”ì´íŠ¸ë¥¼ í•˜ëŠ”ë°, ì‚¬ì¥ë‹˜ì´ ì†ë‹˜ ì—†ì„ ë•ŒëŠ” ì¼ì° ê°€ë„ ëœë‹¤ê³  í•´ì„œ ì¶œí‡´ê·¼ ì‹œê°„ì´ ë§¤ì¼ ë‹¤ë¦…ë‹ˆë‹¤. ê³„ì•½ì„œì—ëŠ” 'ì£¼ 5ì¼, ì¼ 4ì‹œê°„'ì´ë¼ê³ ë§Œ ì í˜€ìˆëŠ”ë°, ë¬¸ì œê°€ ë  ìˆ˜ ìˆë‚˜ìš”?",

    # --- ìœ ì‚¬í•˜ì§€ë§Œ í‘œí˜„ì´ ë‹¤ë¥¸ ì§ˆë¬¸ ---
    "í† ìš”ì¼ì„ ì•½ì • íœ´ì¼ë¡œ ì •í•œ ê²½ìš°, í† ìš”ì¼ì— ì¼í•˜ë©´ ê°€ì‚° ìˆ˜ë‹¹ì„ ë°›ì•„ì•¼ í•©ë‹ˆê¹Œ?",
    "ì €í¬ íšŒì‚¬ì˜ ì•½ì • íœ´ì¼ì´ í† ìš”ì¼ì¸ë°, í† ìš”ì¼ì— ê·¼ë¬´í•  ë•Œ ê°€ì‚° ìˆ˜ë‹¹ì„ ë°›ì„ ìˆ˜ ìˆë‚˜ìš”?",
    "ë§¤ì£¼ ì •í•´ì§„ ê·¼ë¬´ì¼ì— ëª¨ë‘ ì¶œê·¼í•˜ì§€ ëª»í•˜ë©´ ì£¼íœ´ìˆ˜ë‹¹ì„ ë°›ì„ ìˆ˜ ì—†ë‚˜ìš”?",
    "í•˜ë£¨ ê²°ê·¼í–ˆëŠ”ë°, ì£¼íœ´ìˆ˜ë‹¹ì„ ë°›ì„ ìˆ˜ ì—†ë‚˜ìš”?",
    "ì•¼ê°„ ê·¼ë¡œì˜ ì‹œì‘ ì‹œê°„ì€ ëª‡ ì‹œë¶€í„°ì¸ê°€ìš”?",
    "ì•¼ê°„ ê·¼ë¡œê°€ ëë‚˜ëŠ” ì‹œê°„ì€ ëª‡ ì‹œë¶€í„°ì¸ê°€ìš”?",
    "ê·¼ë¡œìì—ê²Œ ê³„ì•½ì„œë¥¼ ì–¸ì œ êµë¶€í•´ì•¼ í•˜ë‚˜ìš”?",
    "ê·¼ë¡œìì—ê²Œ ê³„ì•½ì„œë¥¼ ì–¸ì œ ì£¼ì–´ì•¼ í•˜ë‚˜ìš”?",
    "ê·¼ë¡œì‹œê°„ì´ 4ì‹œê°„ì¼ ë•Œ ìµœì†Œ íœ´ê²Œ ë³´ì¥ ì‹œê°„ì€ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?",
    "4ì‹œê°„ ë™ì•ˆ ê·¼ë¡œí•  ê²½ìš°, ìµœì†Œ íœ´ê²Œ ë³´ì¥ ì‹œê°„ì€ ëª‡ ì‹œê°„ì¸ê°€ìš”?",
    "ê³„ì•½ ê¸°ê°„ì´ 7ì¼ì¸ ë‹¨ê¸° ê·¼ë¡œìë„ ì£¼íœ´ìˆ˜ë‹¹ì„ ë°›ì„ ìˆ˜ ìˆëŠ”ì§€ ê¶ê¸ˆí•©ë‹ˆë‹¤.",
    "ì¼ì£¼ì¼ê°„ ê³„ì•½í•œ ë‹¨ê¸° ê·¼ë¡œìëŠ” ì£¼íœ´ìˆ˜ë‹¹ì„ ë°›ì„ ìˆ˜ ìˆë‚˜ìš”?",

    # 1. í•´ê³  ì ˆì°¨ ê´€ë ¨ (íŒ ë¦¬ìŠ¤íŠ¸ì— ì—†ìŒ)
    "ì‚¬ì¥ë‹˜ì´ ê°‘ìê¸° ë‚´ì¼ë¶€í„° ë‚˜ì˜¤ì§€ ë§ë¼ê³  í•˜ëŠ”ë°, ë¶€ë‹¹í•´ê³  ì•„ë‹Œê°€ìš”?",
    
    # 2. í‡´ì§ê¸ˆ 'ì§€ê¸‰ ê¸°í•œ' ê´€ë ¨ (íŒ ë¦¬ìŠ¤íŠ¸ì— ì—†ìŒ)
    "íšŒì‚¬ë¥¼ ê·¸ë§Œë’€ëŠ”ë°, í‡´ì§ê¸ˆì€ ë©°ì¹  ì•ˆì— ë°›ì•„ì•¼ ë²•ì ìœ¼ë¡œ ë§ëŠ” ê±´ê°€ìš”?",
    
    # 3. 4ëŒ€ ë³´í—˜ ê´€ë ¨ (íŒ ë¦¬ìŠ¤íŠ¸ì— ì—†ìŒ)
    "4ëŒ€ ë³´í—˜ì€ ì•„ë¥´ë°”ì´íŠ¸ìƒë„ ì˜ë¬´ì ìœ¼ë¡œ ê°€ì…í•´ì•¼ í•˜ë‚˜ìš”?",
    
    # 4. ì—°ì°¨ìœ ê¸‰íœ´ê°€ ê³„ì‚° ê´€ë ¨ (íŒ ë¦¬ìŠ¤íŠ¸ì— ì—†ìŒ)
    "ì…ì‚¬í•œ ì§€ 6ê°œì›” ëëŠ”ë°, ì—°ì°¨íœ´ê°€ëŠ” ëª‡ ê°œë‚˜ ì“¸ ìˆ˜ ìˆë‚˜ìš”?",
    
    # 5. ì§ì¥ ë‚´ ê´´ë¡­í˜ (íŒ ë¦¬ìŠ¤íŠ¸ì— ì—†ìŒ)
    "ì§ì¥ ìƒì‚¬ì˜ ê°‘ì§ˆì´ ë„ˆë¬´ ì‹¬í•œë°, ì–´ë””ì— ì‹ ê³ í•  ìˆ˜ ìˆë‚˜ìš”?",
    
    # 6. ì‚°ì—…ì¬í•´ (ì‚°ì¬) ê´€ë ¨ (íŒ ë¦¬ìŠ¤íŠ¸ì— ì—†ìŒ)
    "ì¼í•˜ë‹¤ê°€ ì°½ê³ ì—ì„œ ë„˜ì–´ì ¸ ë‹¤ì³¤ëŠ”ë°, ì‚°ì¬ ì²˜ë¦¬ ì ˆì°¨ê°€ ê¶ê¸ˆí•©ë‹ˆë‹¤.",
    
    # 7. ì‚¬ì§ì„œ ì œì¶œ/í†µë³´ ê¸°ê°„ ê´€ë ¨ (íŒ ë¦¬ìŠ¤íŠ¸ì— ì—†ìŒ)
    "ì œê°€ íšŒì‚¬ë¥¼ ê·¸ë§Œë‘ê³  ì‹¶ìœ¼ë©´, ìµœì†Œ ëª‡ ì£¼ ì „ì—ëŠ” ë¯¸ë¦¬ ì•Œë ¤ì•¼ í•˜ë‚˜ìš”?",
    
    # 8. ì¶œì‚°íœ´ê°€/ìœ¡ì•„íœ´ì§ ê´€ë ¨ (íŒ ë¦¬ìŠ¤íŠ¸ì— ì—†ìŒ)
    "ì¶œì‚°íœ´ê°€ëŠ” ì´ ë©°ì¹ ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê³ , ìœ ê¸‰ì¸ê°€ìš” ë¬´ê¸‰ì¸ê°€ìš”?",
    
    # 9. í”„ë¦¬ëœì„œ ê³„ì•½ ê´€ë ¨ (íŒ ë¦¬ìŠ¤íŠ¸ì— ì—†ìŒ)
    "í”„ë¦¬ëœì„œë¡œ ê³„ì•½í–ˆëŠ”ë°, ì €ë„ ê·¼ë¡œê¸°ì¤€ë²•ì˜ ë³´í˜¸ë¥¼ ë°›ì„ ìˆ˜ ìˆë‚˜ìš”?",
    
    # 10. ì„ê¸ˆì²´ë¶ˆ ì‹ ê³  ì ˆì°¨ ê´€ë ¨ (íŒ ë¦¬ìŠ¤íŠ¸ì— ì—†ìŒ)
    "ì›”ê¸‰ì„ ê³„ì† ì•ˆ ì£¼ëŠ”ë°, ë…¸ë™ì²­ì— ì‹ ê³ í•˜ëŠ” êµ¬ì²´ì ì¸ ë°©ë²•ì„ ì•Œë ¤ì£¼ì„¸ìš”."

]



#"1ì£¼ì— ìµœëŒ€ ëª‡ ì‹œê°„ì„ ì†Œì • ê·¼ë¡œì‹œê°„ìœ¼ë¡œ ì¼í•  ìˆ˜ ìˆìŠµë‹ˆê¹Œ?",
#    "ì†Œì • ê·¼ë¡œì‹œê°„ì´ ê¶ê¸ˆí•´ìš”!",
#   "ì•¼ê°„ ê·¼ë¡œ ì‹œ í†µìƒ ì„ê¸ˆì˜ ëª‡ %ë¥¼ ì¶”ê°€ë¡œ ë°›ì•„ì•¼ í•©ë‹ˆê¹Œ?",
#   "ì˜¤í›„ 10ì‹œë¶€í„° ì˜¤ì „ 6ì‹œ ì‚¬ì´ì— ì¼í•˜ë©´ ì„ê¸ˆì€ ì–¼ë§ˆë‚˜ í• ì¦ë˜ì–´ì•¼ í•˜ë‚˜ìš”?",
#   "ë²•ì •íœ´ì¼ì´ë‚˜ ì•½ì •íœ´ì¼ì— ì¼í•˜ë©´ ì¶”ê°€ ìˆ˜ë‹¹ì„ ë°›ì„ ìˆ˜ ìˆë‚˜ìš”?",
#   "íœ´ì¼ì— ì¼í•˜ë©´ ì–´ë–¤ ì¶”ê°€ ìˆ˜ë‹¹ì„ ë°›ë‚˜ìš”?",
#   "ìƒˆí•´ê°€ ë˜ì–´ì„œ ìµœì € ì„ê¸ˆì´ ì¸ìƒí–ˆëŠ”ë°, ê·¼ë¡œê³„ì•½ì„œë¥¼ ë‹¤ì‹œ ì‘ì„±í•´ì•¼í•˜ë‚˜ìš”?",
#   "ì—°ë´‰ í˜‘ìƒ í›„, ê·¼ë¡œê³„ì•½ì„œë¥¼ ë‹¤ì‹œ ì‘ì„±í•´ì•¼í•˜ë‚˜ìš”?"'''

# --- ğŸ¤– ì œë¡œìƒ· í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ ---
async def run_zero_shot_test(question: str):
    """ì°¸ê³  ìë£Œ ì—†ì´, AIì˜ ê¸°ë³¸ ì§€ì‹ë§Œìœ¼ë¡œ ë‹µë³€í•˜ê²Œ í•©ë‹ˆë‹¤."""
    system_prompt = "ë‹¹ì‹ ì€ ê³„ì•½ë²• ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ì‚¬ìš©ìì˜ ì§ˆë¬¸ì— ê°„ê²°í•˜ê³  ì •í™•í•˜ê²Œ ë‹µë³€í•˜ì„¸ìš”."

    response = await client.chat.completions.create(
        model="gpt-4o",
        messages=[
            {"role": "system", "content": system_prompt},
            {"role": "user", "content": question},
        ],
        temperature=0,
    )
    return response.choices[0].message.content

'''
# --- ğŸ‘¨â€ğŸ« í“¨ìƒ· í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ ---
async def run_few_shot_test(question: str, tips: str):
    """'íŒ ëª©ë¡'ì„ ì°¸ê³  ìë£Œë¡œ ì œê³µí•˜ì—¬, ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œë§Œ ë‹µë³€í•˜ê²Œ í•©ë‹ˆë‹¤."""
    system_prompt = f"""
    ë‹¹ì‹ ì€ ì£¼ì–´ì§„ 'ì°¸ê³  ìë£Œ'ë§Œì„ ê¸°ë°˜ìœ¼ë¡œ ì‚¬ìš©ìì˜ ì§ˆë¬¸ì— ë‹µë³€í•˜ëŠ” AIì…ë‹ˆë‹¤.
    ìë£Œì— ì—†ëŠ” ë‚´ìš©ì€ ì ˆëŒ€ë¡œ ì–¸ê¸‰í•˜ì§€ ë§ê³ , 'ìë£Œì— ì—†ëŠ” ë‚´ìš©ì…ë‹ˆë‹¤'ë¼ê³  ë‹µë³€í•˜ì„¸ìš”.

    --- ì°¸ê³  ìë£Œ ---
    {tips}
    -----------------
    """

    response = await client.chat.completions.create(
        model="gpt-4o",
        messages=[
            {"role": "system", "content": system_prompt},
            {"role": "user", "content": question},
        ],
        temperature=0,
    )
    return response.choices[0].message.content

# --- ğŸš€ ë©”ì¸ ì‹¤í–‰ í•¨ìˆ˜ ---
async def main():
    print("===== í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤ =====")
    for i, question in enumerate(QUESTION_LIST):
        print(f"\n\n--- [ì§ˆë¬¸ {i+1}: {question}] ---")

        # ì œë¡œìƒ· í…ŒìŠ¤íŠ¸ ì‹¤í–‰
        zero_shot_answer = await run_zero_shot_test(question)
        print(f"ğŸ¤– Zero-Shot ë‹µë³€: {zero_shot_answer}")

        # í“¨ìƒ· í…ŒìŠ¤íŠ¸ ì‹¤í–‰
        few_shot_answer = await run_few_shot_test(question, TIP_LIST)
        print(f"ğŸ‘¨â€ğŸ« Few-Shot ë‹µë³€: {few_shot_answer}")

    print("\n\n===== ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. =====")


if __name__ == "__main__":
    asyncio.run(main()) '''

# --- ê²€ìƒ‰ ê´€ë ¨ í•¨ìˆ˜ ---
async def get_embedding(text):
    response = await client.embeddings.create(model="text-embedding-3-small", input=text)
    return response.data[0].embedding

# âš™ï¸ [ë³€ê²½ì  1] ê²€ìƒ‰ í•¨ìˆ˜ê°€ íŒê³¼ í•¨ê»˜ 'ìµœê³  ìœ ì‚¬ë„ ì ìˆ˜'ë„ ë°˜í™˜í•˜ë„ë¡ ìˆ˜ì •
async def find_top_relevant_tips(question, tip_embeddings, top_n=3):
    """ì§ˆë¬¸ê³¼ ê°€ì¥ ê´€ë ¨ì„± ë†’ì€ ìƒìœ„ Nê°œì˜ íŒê³¼, ê·¸ ì¤‘ ìµœê³  ìœ ì‚¬ë„ ì ìˆ˜ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤."""
    question_embedding = await get_embedding(question)
    similarities = [np.dot(question_embedding, tip_embedding) for tip_embedding in tip_embeddings]
    
    top_indices = np.argsort(similarities)[-top_n:][::-1]
    
    # ìµœê³  ìœ ì‚¬ë„ ì ìˆ˜
    top_score = similarities[top_indices[0]]
    
    relevant_tips_str = "\n\n".join([TIP_LIST[i] for i in top_indices])
    
    return relevant_tips_str, top_score # 2ê°œì˜ ê°’ì„ ë°˜í™˜

# --- RAG í•¨ìˆ˜ (ë³€ê²½ ì—†ìŒ) ---
async def run_advanced_rag_test(question: str, relevant_tips: str):
    # ... (ê¸°ì¡´ ì½”ë“œì™€ ë™ì¼)
    system_prompt = f"""
    ë‹¹ì‹ ì€ ì£¼ì–´ì§„ 'ì°¸ê³  ìë£Œ'ë§Œì„ ê¸°ë°˜ìœ¼ë¡œ ë‹µë³€í•˜ëŠ” AI ë…¸ë¬´ì‚¬ì…ë‹ˆë‹¤. ë‹¤ìŒ ê·œì¹™ì„ ì—„ê²©íˆ ë”°ë¥´ì„¸ìš”...
    """
    response = await client.chat.completions.create(model="gpt-4o", messages=[{"role": "system", "content": system_prompt}, {"role": "user", "content": question}], temperature=0)
    return response.choices[0].message.content

# --- ğŸš€ [ë³€ê²½ì  2] ë©”ì¸ ì‹¤í–‰ í•¨ìˆ˜ì— 'ìœ ì‚¬ë„ ì„ê³„ê°’' ë¡œì§ ì¶”ê°€ ---
async def main():
    print("===== í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤ =====")
    
    # ì´ ê°’ì„ ì¡°ì •í•˜ì—¬ 'ê´€ë ¨ì„±'ì˜ ê¸°ì¤€ì„ ì„¤ì •í•©ë‹ˆë‹¤. (0.0 ~ 1.0)
    # 0.75 ì´ìƒì´ë©´ ê½¤ ê´€ë ¨ì„±ì´ ë†’ë‹¤ê³  íŒë‹¨
    SIMILARITY_THRESHOLD = 0.3
    ##########################ê´€ë ¨ì„± ê¸°ì¤€###########################

    print("íŒ ëª©ë¡ ì„ë² ë”©ì„ ìƒì„±í•©ë‹ˆë‹¤...")
    tip_embeddings = [await get_embedding(tip) for tip in TIP_LIST]
    print("ì„ë² ë”© ìƒì„± ì™„ë£Œ!")

    for i, question in enumerate(QUESTION_LIST):
        print(f"\n\n--- [ì§ˆë¬¸ {i+1}: {question}] ---")

        # ì œë¡œìƒ· í…ŒìŠ¤íŠ¸ ì‹¤í–‰
        zero_shot_answer = await run_zero_shot_test(question)
        print(f"ğŸ¤– Zero-Shot ë‹µë³€: {zero_shot_answer}")

        # Advanced RAG í…ŒìŠ¤íŠ¸ ì‹¤í–‰
        # 1. ê´€ë ¨ íŒê³¼ ìµœê³  ì ìˆ˜ë¥¼ í•¨ê»˜ ë°›ì•„ì˜´
        relevant_tips, top_score = await find_top_relevant_tips(question, tip_embeddings, top_n=3)
        
        # 2. ìµœê³  ì ìˆ˜ê°€ ì„ê³„ê°’ì„ ë„˜ëŠ”ì§€ í™•ì¸
        if top_score >= SIMILARITY_THRESHOLD:
            # ì„ê³„ê°’ì„ ë„˜ìœ¼ë©´, AIì—ê²Œ ë‹µë³€ ìƒì„± ìš”ì²­
            advanced_rag_answer = await run_advanced_rag_test(question, relevant_tips)
            print(f"ğŸ‘¨â€ğŸ« Advanced RAG ë‹µë³€: {advanced_rag_answer}")
        else:
            # ì„ê³„ê°’ì„ ë„˜ì§€ ëª»í•˜ë©´, ê´€ë ¨ íŒì´ ì—†ë‹¤ê³  íŒë‹¨í•˜ê³  AIë¥¼ í˜¸ì¶œí•˜ì§€ ì•ŠìŒ
            print("ğŸ‘¨â€ğŸ« Advanced RAG ë‹µë³€: ê´€ë ¨ëœ íŒì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")

    print("\n\n===== ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. =====")


if __name__ == "__main__":
    asyncio.run(main())